let rafId=null;let isAnimating=false;let scrollDirection="down";let lastScrollPosition=0;let animationQueue=[];const animationPerformance={startTime:0,frameCount:0,fps:0,isOptimized:true};document.addEventListener("DOMContentLoaded",function(){initializeAnimationSystem()});function initializeAnimationSystem(){setupScrollAnimations();setupHoverAnimations();setupImageMaskAnimations();setupTextRevealAnimations();setupProjectCardAnimations();setupTimelineAnimations();setupBackgroundAnimations();startAnimationLoop();console.log("Advanced animation system initialized")}function setupScrollAnimations(){const scrollTriggers=document.querySelectorAll("[data-scroll]");const scrollObserver=new IntersectionObserver(entries=>{entries.forEach(entry=>{const element=entry.target;const animationType=element.dataset.scroll;if(entry.isIntersecting){triggerScrollAnimation(element,animationType)}})},{threshold:.1,rootMargin:"0px 0px -10% 0px"});scrollTriggers.forEach(element=>{scrollObserver.observe(element)});window.addEventListener("scroll",updateScrollDirection,{passive:true})}function updateScrollDirection(){const currentScrollPosition=window.pageYOffset;scrollDirection=currentScrollPosition>lastScrollPosition?"down":"up";lastScrollPosition=currentScrollPosition}function triggerScrollAnimation(element,animationType){switch(animationType){case"fade-in":animateFadeIn(element);break;case"slide-up":animateSlideUp(element);break;case"slide-left":animateSlideLeft(element);break;case"slide-right":animateSlideRight(element);break;case"scale-in":animateScaleIn(element);break;case"rotate-in":animateRotateIn(element);break;case"stagger":animateStagger(element);break;default:animateFadeIn(element)}}function animateFadeIn(element){element.style.opacity="0";element.style.transition="opacity 0.8s ease";requestAnimationFrame(()=>{element.style.opacity="1"})}function animateSlideUp(element){element.style.transform="translateY(50px)";element.style.opacity="0";element.style.transition="transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94), opacity 0.8s ease";requestAnimationFrame(()=>{element.style.transform="translateY(0)";element.style.opacity="1"})}function animateSlideLeft(element){element.style.transform="translateX(-50px)";element.style.opacity="0";element.style.transition="transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94), opacity 0.8s ease";requestAnimationFrame(()=>{element.style.transform="translateX(0)";element.style.opacity="1"})}function animateSlideRight(element){element.style.transform="translateX(50px)";element.style.opacity="0";element.style.transition="transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94), opacity 0.8s ease";requestAnimationFrame(()=>{element.style.transform="translateX(0)";element.style.opacity="1"})}function animateScaleIn(element){element.style.transform="scale(0.8)";element.style.opacity="0";element.style.transition="transform 0.8s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.8s ease";requestAnimationFrame(()=>{element.style.transform="scale(1)";element.style.opacity="1"})}function animateRotateIn(element){element.style.transform="rotate(-10deg) scale(0.8)";element.style.opacity="0";element.style.transition="transform 0.8s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.8s ease";requestAnimationFrame(()=>{element.style.transform="rotate(0deg) scale(1)";element.style.opacity="1"})}function animateStagger(container){const children=container.children;Array.from(children).forEach((child,index)=>{child.style.transform="translateY(30px)";child.style.opacity="0";child.style.transition="transform 0.6s ease, opacity 0.6s ease";setTimeout(()=>{child.style.transform="translateY(0)";child.style.opacity="1"},index*100)})}function setupHoverAnimations(){const projectCards=document.querySelectorAll(".project-card");projectCards.forEach(card=>{setupProjectCardHover(card)});const timelineItems=document.querySelectorAll(".timeline-item");timelineItems.forEach(item=>{setupTimelineItemHover(item)});const navLinks=document.querySelectorAll(".nav-link");navLinks.forEach(link=>{setupNavLinkHover(link)});const buttons=document.querySelectorAll(".hero-cta, .submit-btn");buttons.forEach(button=>{setupButtonHover(button)})}function setupProjectCardHover(card){const image=card.querySelector("img");const overlay=card.querySelector(".project-overlay");card.addEventListener("mouseenter",()=>{if(image){image.style.transform="scale(1.1)";image.style.filter="contrast(1.3) saturate(1.3)"}if(overlay){overlay.style.opacity="1"}card.style.transform="translateY(-10px) rotate(0deg)";card.style.boxShadow="0 20px 40px rgba(0, 0, 0, 0.3)"});card.addEventListener("mouseleave",()=>{if(image){image.style.transform="scale(1)";image.style.filter=""}if(overlay){overlay.style.opacity="0"}const originalTransform=card.dataset.originalTransform||"none";card.style.transform=originalTransform;card.style.boxShadow=""});const computedStyle=window.getComputedStyle(card);card.dataset.originalTransform=computedStyle.transform}function setupTimelineItemHover(item){const image=item.querySelector(".timeline-image");item.addEventListener("mouseenter",()=>{if(image){image.style.transform="rotate(0deg) scale(1.05)"}item.style.filter="brightness(1.1)"});item.addEventListener("mouseleave",()=>{if(image){const originalTransform=image.dataset.originalTransform||"rotate(3deg)";image.style.transform=originalTransform}item.style.filter=""})}function setupNavLinkHover(link){link.addEventListener("mouseenter",()=>{link.style.transform="translateX(20px)";link.style.color="var(--accent)"});link.addEventListener("mouseleave",()=>{link.style.transform="translateX(0)";link.style.color=""})}function setupButtonHover(button){button.addEventListener("mouseenter",()=>{button.style.transform="translateY(-2px)";button.style.boxShadow="0 10px 20px rgba(232, 84, 57, 0.3)"});button.addEventListener("mouseleave",()=>{button.style.transform="translateY(0)";button.style.boxShadow=""})}function setupImageMaskAnimations(){const imageMasks=document.querySelectorAll(".image-mask-reveal");const maskObserver=new IntersectionObserver(entries=>{entries.forEach(entry=>{if(entry.isIntersecting){entry.target.classList.add("revealed")}})},{threshold:.3});imageMasks.forEach(mask=>{maskObserver.observe(mask)})}function setupTextRevealAnimations(){const textReveals=document.querySelectorAll(".text-reveal");textReveals.forEach(element=>{const text=element.textContent;element.innerHTML=`<span class="text-reveal-inner">${text}</span>`;const inner=element.querySelector(".text-reveal-inner");inner.style.transform="translateY(100%)";inner.style.display="inline-block";inner.style.transition="transform 0.8s cubic-bezier(0.77, 0, 0.175, 1)"});const textObserver=new IntersectionObserver(entries=>{entries.forEach(entry=>{if(entry.isIntersecting){const inner=entry.target.querySelector(".text-reveal-inner");if(inner){inner.style.transform="translateY(0)"}}})},{threshold:.1});textReveals.forEach(element=>{textObserver.observe(element)})}function setupProjectCardAnimations(){const projectCards=document.querySelectorAll(".project-card");projectCards.forEach((card,index)=>{card.style.animationDelay=`${index*.1}s`;if(window.innerWidth>1024){addMagneticEffect(card)}addTiltEffect(card)})}function addMagneticEffect(element){element.addEventListener("mousemove",e=>{const rect=element.getBoundingClientRect();const x=e.clientX-rect.left-rect.width/2;const y=e.clientY-rect.top-rect.height/2;const distance=Math.sqrt(x*x+y*y);const maxDistance=Math.max(rect.width,rect.height)/2;if(distance<maxDistance){const strength=(maxDistance-distance)/maxDistance;const moveX=x/maxDistance*20*strength;const moveY=y/maxDistance*20*strength;element.style.transform=`translate(${moveX}px, ${moveY}px)`}});element.addEventListener("mouseleave",()=>{element.style.transform=""})}function addTiltEffect(element){element.addEventListener("mousemove",e=>{const rect=element.getBoundingClientRect();const x=e.clientX-rect.left;const y=e.clientY-rect.top;const centerX=rect.width/2;const centerY=rect.height/2;const rotateX=(y-centerY)/centerY*-10;const rotateY=(x-centerX)/centerX*10;element.style.transform=`perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`});element.addEventListener("mouseleave",()=>{element.style.transform=""})}function setupTimelineAnimations(){const timelineItems=document.querySelectorAll(".timeline-item");const timelineObserver=new IntersectionObserver(entries=>{entries.forEach((entry,index)=>{if(entry.isIntersecting){setTimeout(()=>{entry.target.classList.add("animate-in")},index*200)}})},{threshold:.2});timelineItems.forEach(item=>{timelineObserver.observe(item)})}function setupBackgroundAnimations(){const floatingElements=document.querySelectorAll(".floating-elements .alte-texture");floatingElements.forEach((element,index)=>{const speed=.5+index*.2;const amplitude=20+index*10;element.style.animation=`float ${3+index}s ease-in-out infinite`;element.style.animationDelay=`${index*.5}s`});const patterns=document.querySelectorAll(".animated-pattern");patterns.forEach(pattern=>{pattern.style.animation="patternMove 4s linear infinite"})}function startAnimationLoop(){animationPerformance.startTime=performance.now();function animate(){animationPerformance.frameCount++;const currentTime=performance.now();const elapsed=currentTime-animationPerformance.startTime;if(elapsed>=1e3){animationPerformance.fps=animationPerformance.frameCount;animationPerformance.frameCount=0;animationPerformance.startTime=currentTime;if(animationPerformance.fps<30&&animationPerformance.isOptimized){optimizeAnimations();animationPerformance.isOptimized=false}}processAnimationQueue();rafId=requestAnimationFrame(animate)}animate()}function optimizeAnimations(){console.log("Optimizing animations for better performance");const complexAnimations=document.querySelectorAll("[data-complex-animation]");complexAnimations.forEach(element=>{element.style.animation="none"});const hoverElements=document.querySelectorAll(".project-card, .timeline-item");hoverElements.forEach(element=>{element.style.transition="transform 0.2s ease"})}function processAnimationQueue(){if(animationQueue.length===0)return;const maxProcessPerFrame=3;const toProcess=animationQueue.splice(0,maxProcessPerFrame);toProcess.forEach(animation=>{animation.execute()})}function queueAnimation(animationFunction,priority=1){animationQueue.push({execute:animationFunction,priority:priority,timestamp:performance.now()});animationQueue.sort((a,b)=>b.priority-a.priority)}function cleanupAnimations(){if(rafId){cancelAnimationFrame(rafId)}animationQueue.length=0;const animatedElements=document.querySelectorAll('[style*="transform"], [style*="opacity"]');animatedElements.forEach(element=>{element.style.transform="";element.style.opacity="";element.style.transition=""})}window.addEventListener("resize",function(){setTimeout(()=>{setupProjectCardAnimations();setupTimelineAnimations()},100)});document.addEventListener("visibilitychange",function(){if(document.hidden){if(rafId){cancelAnimationFrame(rafId)}}else{startAnimationLoop()}});window.AnimationSystem={queue:queueAnimation,cleanup:cleanupAnimations,optimize:optimizeAnimations,performance:animationPerformance,triggerScrollAnimation:triggerScrollAnimation};let currentSection="hero";let isScrolling=false;let lastScrollTime=0;const scrollThreshold=100;document.addEventListener("DOMContentLoaded",function(){initializeApp()});function initializeApp(){setupSmoothScrolling();setupScrollAnimations();setupParallaxEffects();setupFormHandling();setupCursorEffects();setupIntersectionObserver();setupTextAnimations();addLoadingStates();console.log("Palmwine Papi portfolio initialized")}function setupSmoothScrolling(){const navLinks=document.querySelectorAll('a[href^="#"]');navLinks.forEach(link=>{link.addEventListener("click",function(e){e.preventDefault();const targetId=this.getAttribute("href").substring(1);const targetElement=document.getElementById(targetId);if(targetElement){const navOverlay=document.getElementById("navOverlay");const navToggle=document.getElementById("navToggle");if(navOverlay.classList.contains("active")){navOverlay.classList.remove("active");navToggle.classList.remove("active")}targetElement.scrollIntoView({behavior:"smooth",block:"start"});currentSection=targetId;updateActiveNavLink(targetId)}})})}function updateActiveNavLink(sectionId){const navLinks=document.querySelectorAll(".nav-link");navLinks.forEach(link=>{const href=link.getAttribute("href").substring(1);if(href===sectionId){link.classList.add("active")}else{link.classList.remove("active")}})}function setupScrollAnimations(){const scrollElements=document.querySelectorAll(".scroll-reveal, .scroll-reveal-left, .scroll-reveal-right");window.addEventListener("scroll",throttle(function(){scrollElements.forEach(element=>{if(isElementInViewport(element)){element.classList.add("active")}});updateParallax();updateScrollProgress()},16))}function isElementInViewport(element){const rect=element.getBoundingClientRect();const windowHeight=window.innerHeight;const threshold=windowHeight*.1;return rect.top<=windowHeight-threshold&&rect.bottom>=threshold}function setupParallaxEffects(){const parallaxElements={slow:document.querySelectorAll(".parallax-slow"),medium:document.querySelectorAll(".parallax-medium"),fast:document.querySelectorAll(".parallax-fast")};window.parallaxElements=parallaxElements}function updateParallax(){const scrollTop=window.pageYOffset;const windowHeight=window.innerHeight;if(window.parallaxElements){window.parallaxElements.slow.forEach(element=>{const rect=element.getBoundingClientRect();const speed=.5;const yPos=-(scrollTop*speed);element.style.transform=`translateY(${yPos}px)`});window.parallaxElements.medium.forEach(element=>{const rect=element.getBoundingClientRect();const speed=.3;const yPos=-(scrollTop*speed);element.style.transform=`translateY(${yPos}px)`});window.parallaxElements.fast.forEach(element=>{const rect=element.getBoundingClientRect();const speed=.7;const yPos=-(scrollTop*speed);element.style.transform=`translateY(${yPos}px)`})}const heroImage=document.querySelector(".hero-image");if(heroImage){const heroSection=document.querySelector(".hero-section");const heroRect=heroSection.getBoundingClientRect();if(heroRect.bottom>0){const parallaxValue=scrollTop*.5;heroImage.style.transform=`translateY(${parallaxValue}px)`}}}function setupIntersectionObserver(){const observerOptions={threshold:.1,rootMargin:"0px 0px -10% 0px"};const sectionObserver=new IntersectionObserver(entries=>{entries.forEach(entry=>{if(entry.isIntersecting){const sectionId=entry.target.id;currentSection=sectionId;updateActiveNavLink(sectionId);triggerSectionAnimations(entry.target)}})},observerOptions);const sections=document.querySelectorAll("section[id]");sections.forEach(section=>{sectionObserver.observe(section)});const imageObserver=new IntersectionObserver(entries=>{entries.forEach(entry=>{if(entry.isIntersecting){const img=entry.target;if(img.dataset.src){img.src=img.dataset.src;img.classList.add("loaded");imageObserver.unobserve(img)}}})},{threshold:.1});const lazyImages=document.querySelectorAll("img[data-src]");lazyImages.forEach(img=>{imageObserver.observe(img)})}function triggerSectionAnimations(section){const animatedElements=section.querySelectorAll(".fade-in, .slide-in, .scale-in");animatedElements.forEach((element,index)=>{setTimeout(()=>{element.classList.add("active")},index*100)})}function setupFormHandling(){const contactForm=document.getElementById("contactForm");if(contactForm){contactForm.addEventListener("submit",handleFormSubmission);const inputs=contactForm.querySelectorAll("input, textarea");inputs.forEach(input=>{input.addEventListener("blur",validateField);input.addEventListener("input",clearErrorStates)})}}function handleFormSubmission(e){e.preventDefault();const form=e.target;const formData=new FormData(form);const submitBtn=form.querySelector(".submit-btn");if(!validateForm(form)){showFormMessage("Please fill in all required fields correctly.","error");return}const originalText=submitBtn.textContent;submitBtn.textContent="Sending...";submitBtn.disabled=true;submitBtn.classList.add("loading");setTimeout(()=>{form.reset();submitBtn.textContent=originalText;submitBtn.disabled=false;submitBtn.classList.remove("loading");showFormMessage("Message sent successfully! I'll get back to you soon.","success")},2e3)}function validateForm(form){let isValid=true;const inputs=form.querySelectorAll("input[required], textarea[required]");inputs.forEach(input=>{if(!validateField({target:input})){isValid=false}});return isValid}function validateField(e){const field=e.target;const value=field.value.trim();const fieldType=field.type;let isValid=true;field.classList.remove("error");if(field.hasAttribute("required")&&!value){isValid=false}if(fieldType==="email"&&value){const emailRegex=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!emailRegex.test(value)){isValid=false}}if(!isValid){field.classList.add("error")}return isValid}function clearErrorStates(e){e.target.classList.remove("error")}function showFormMessage(message,type){const existingMessage=document.querySelector(".form-message");if(existingMessage){existingMessage.remove()}const messageEl=document.createElement("div");messageEl.className=`form-message ${type}`;messageEl.textContent=message;const form=document.getElementById("contactForm");form.parentNode.insertBefore(messageEl,form.nextSibling);setTimeout(()=>{if(messageEl.parentNode){messageEl.remove()}},5e3)}function setupCursorEffects(){if(window.innerWidth>1024&&!("ontouchstart"in window)){createCustomCursor();setupHoverEffects()}}function createCustomCursor(){const cursor=document.createElement("div");cursor.className="cursor-trail";document.body.appendChild(cursor);let mouseX=0;let mouseY=0;let cursorX=0;let cursorY=0;document.addEventListener("mousemove",e=>{mouseX=e.clientX;mouseY=e.clientY});function animateCursor(){cursorX+=(mouseX-cursorX)*.1;cursorY+=(mouseY-cursorY)*.1;cursor.style.left=cursorX-10+"px";cursor.style.top=cursorY-10+"px";requestAnimationFrame(animateCursor)}animateCursor()}function setupHoverEffects(){const hoverElements=document.querySelectorAll("a, button, .project-card, .timeline-item");hoverElements.forEach(element=>{element.addEventListener("mouseenter",()=>{const cursor=document.querySelector(".cursor-trail");if(cursor){cursor.style.transform="scale(1.5)";cursor.style.background="var(--accent)"}});element.addEventListener("mouseleave",()=>{const cursor=document.querySelector(".cursor-trail");if(cursor){cursor.style.transform="scale(1)";cursor.style.background="var(--primary)"}})})}function setupTextAnimations(){const heroTagline=document.querySelector(".hero-tagline");if(heroTagline){typewriterEffect(heroTagline,heroTagline.textContent,50)}const sectionTitles=document.querySelectorAll(".section-title");sectionTitles.forEach(title=>{title.addEventListener("mouseenter",()=>{scrambleText(title,title.textContent)})})}function typewriterEffect(element,text,speed=100){element.textContent="";element.style.opacity="1";let i=0;const timer=setInterval(()=>{if(i<text.length){element.textContent+=text.charAt(i);i++}else{clearInterval(timer)}},speed)}function scrambleText(element,originalText){const chars="!@#$%^&*()_+-=[]{}|;:,.<>?";let iterations=0;const maxIterations=10;const interval=setInterval(()=>{element.textContent=originalText.split("").map((char,index)=>{if(index<iterations){return originalText[index]}return chars[Math.floor(Math.random()*chars.length)]}).join("");iterations+=1;if(iterations>maxIterations){clearInterval(interval);element.textContent=originalText}},50)}function addLoadingStates(){const images=document.querySelectorAll("img");images.forEach(img=>{if(!img.complete){img.classList.add("loading");img.addEventListener("load",()=>{img.classList.remove("loading");img.classList.add("loaded")})}});window.addEventListener("load",()=>{document.body.classList.add("loaded");setTimeout(()=>{const initialElements=document.querySelectorAll(".fade-in-initial");initialElements.forEach((element,index)=>{setTimeout(()=>{element.classList.add("active")},index*200)})},500)})}function updateScrollProgress(){const scrollProgress=window.pageYOffset/(document.documentElement.scrollHeight-window.innerHeight)*100;document.documentElement.style.setProperty("--scroll-progress",`${scrollProgress}%`)}function throttle(func,limit){let inThrottle;return function(){const args=arguments;const context=this;if(!inThrottle){func.apply(context,args);inThrottle=true;setTimeout(()=>inThrottle=false,limit)}}}function debounce(func,wait,immediate){let timeout;return function(){const context=this;const args=arguments;const later=function(){timeout=null;if(!immediate)func.apply(context,args)};const callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow)func.apply(context,args)}}window.addEventListener("resize",debounce(function(){updateParallax();if(window.innerWidth<=1024||"ontouchstart"in window){const cursor=document.querySelector(".cursor-trail");if(cursor){cursor.remove()}}else{if(!document.querySelector(".cursor-trail")){setupCursorEffects()}}},250));window.addEventListener("error",function(e){console.error("Portfolio error:",e.error)});window.PortfolioApp={currentSection:currentSection,updateParallax:updateParallax,typewriterEffect:typewriterEffect,scrambleText:scrambleText,showFormMessage:showFormMessage};console.log("Navigation script loaded");document.addEventListener("DOMContentLoaded",function(){console.log("DOM loaded, initializing navigation");const navToggle=document.getElementById("navToggle");const navMenu=document.getElementById("navMenu");const navItems=document.querySelectorAll(".nav-item");if(!navToggle||!navMenu){console.error("Navigation elements not found!");console.log("navToggle:",navToggle);console.log("navMenu:",navMenu);return}let isNavOpen=false;navToggle.addEventListener("click",function(){console.log("Navigation toggle clicked");isNavOpen=!isNavOpen;if(isNavOpen){navToggle.classList.add("active");navMenu.classList.add("active");document.body.style.overflow="hidden";console.log("Navigation opened")}else{navToggle.classList.remove("active");navMenu.classList.remove("active");document.body.style.overflow="";console.log("Navigation closed")}});navItems.forEach(function(item){item.addEventListener("click",function(e){e.preventDefault();const href=this.getAttribute("href");isNavOpen=false;navToggle.classList.remove("active");navMenu.classList.remove("active");document.body.style.overflow="";const target=document.querySelector(href);if(target){setTimeout(()=>{target.scrollIntoView({behavior:"smooth",block:"start"})},300)}})});navMenu.addEventListener("click",function(e){if(e.target===navMenu){isNavOpen=false;navToggle.classList.remove("active");navMenu.classList.remove("active");document.body.style.overflow=""}});document.addEventListener("keydown",function(e){if(e.key==="Escape"&&isNavOpen){isNavOpen=false;navToggle.classList.remove("active");navMenu.classList.remove("active");document.body.style.overflow=""}});console.log("Navigation initialized successfully")});let navToggle=null;let navMenu=null;let navItems=null;let isNavOpen=false;document.addEventListener("DOMContentLoaded",function(){initializeNavigation()});function initializeNavigation(){navToggle=document.getElementById("navToggle");navMenu=document.getElementById("navMenu");navItems=document.querySelectorAll(".nav-item");if(navToggle&&navMenu){setupNavigationEvents();console.log("Navigation initialized")}}function setupNavigationEvents(){navToggle.addEventListener("click",toggleNavigation);navItems.forEach(item=>{item.addEventListener("click",closeNavigation)});navMenu.addEventListener("click",function(e){if(e.target===navMenu){closeNavigation()}});document.addEventListener("keydown",function(e){if(e.key==="Escape"&&isNavOpen){closeNavigation()}function toggleNavigation(){if(isNavOpen){closeNavigation()}else{openNavigation()}}function openNavigation(){navToggle.classList.add("active");navMenu.classList.add("active");document.body.style.overflow="hidden";isNavOpen=true}function closeNavigation(){navToggle.classList.remove("active");navMenu.classList.remove("active");document.body.style.overflow="";isNavOpen=false}document.addEventListener("DOMContentLoaded",function(){const navItems=document.querySelectorAll(".nav-item");navItems.forEach(item=>{item.addEventListener("click",function(e){e.preventDefault();const targetId=this.getAttribute("href");const targetSection=document.querySelector(targetId);if(targetSection){targetSection.scrollIntoView({behavior:"smooth",block:"start"})}closeNavigation()})})})},{passive:true})}function setActiveNavLink(sectionId){navLinks.forEach(link=>{const href=link.getAttribute("href");if(href===`#${sectionId}`){link.classList.add("active")}else{link.classList.remove("active")}})}function getNavigationState(){return{isOpen:isNavOpen,activeSection:getCurrentActiveSection()}}function getCurrentActiveSection(){const sections=document.querySelectorAll("section[id]");let activeSection="hero";sections.forEach(section=>{const rect=section.getBoundingClientRect();const sectionHeight=rect.height;const viewportHeight=window.innerHeight;if(rect.top<=viewportHeight*.5&&rect.bottom>=viewportHeight*.5){activeSection=section.id}});return activeSection}function updateNavigationOnScroll(){if(isNavOpen)return;const activeSection=getCurrentActiveSection();setActiveNavLink(activeSection);const scrollY=window.pageYOffset;const navElement=document.querySelector(".main-nav");if(scrollY>100){navElement.classList.add("scrolled")}else{navElement.classList.remove("scrolled")}}function enhanceAccessibility(){navToggle.setAttribute("aria-label","Toggle navigation menu");navToggle.setAttribute("aria-expanded","false");navToggle.setAttribute("aria-controls","navOverlay");navOverlay.setAttribute("aria-hidden","true");navOverlay.setAttribute("role","dialog");navOverlay.setAttribute("aria-labelledby","navToggle");function updateAriaStates(){navToggle.setAttribute("aria-expanded",isNavOpen?"true":"false");navOverlay.setAttribute("aria-hidden",isNavOpen?"false":"true")}const observer=new MutationObserver(function(mutations){mutations.forEach(function(mutation){if(mutation.attributeName==="class"){updateAriaStates()}})});observer.observe(navOverlay,{attributes:true})}function optimizeNavigation(){navOverlay.addEventListener("scroll",function(){if(isNavOpen){document.body.scrollTop=0;document.documentElement.scrollTop=0}},{passive:false});navLinks.forEach(link=>{link.style.willChange="transform, opacity"})}window.addEventListener("scroll",function(){updateNavigationOnScroll()},{passive:true});document.addEventListener("DOMContentLoaded",function(){enhanceAccessibility();optimizeNavigation()});window.NavigationController={open:openNavigation,close:closeNavigation,toggle:toggleNavigation,setActiveLink:setActiveNavLink,getState:getNavigationState,isOpen:()=>isNavOpen};(function(){"use strict";const animatedElements=new Set;const observerOptions={root:null,rootMargin:"-10% 0px -10% 0px",threshold:.1};const scrollObserver=new IntersectionObserver(entries=>{entries.forEach(entry=>{const element=entry.target;const animationType=element.getAttribute("data-scroll");if(entry.isIntersecting&&!animatedElements.has(element)){animateElement(element,animationType,true);animatedElements.add(element)}else if(!entry.isIntersecting&&animatedElements.has(element)){animateElement(element,animationType,false);animatedElements.delete(element)}})},observerOptions);function animateElement(element,type,entering){if(entering){const delay=element.getAttribute("data-delay")||0;setTimeout(()=>{element.classList.add("animate-in")},delay)}else{element.classList.remove("animate-in")}}function initScrollAnimations(){const animatedElements=document.querySelectorAll("[data-scroll]");animatedElements.forEach((element,index)=>{if(element.classList.contains("timeline-item")){element.setAttribute("data-delay",index*150)}scrollObserver.observe(element)})}if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",initScrollAnimations)}else{initScrollAnimations()}window.initScrollAnimations=initScrollAnimations})();